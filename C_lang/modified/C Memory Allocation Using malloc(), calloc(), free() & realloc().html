
<!DOCTYPE html>
<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>

  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>


  <link rel="stylesheet" href="./style/style1.css">
  <link rel="stylesheet" href="./style/style2.css">


</head>

<body>

  <div class="container">
<h2 class="page_title"><strong>C Dynamic Memory Allocation</strong></h2><br><p>
In this article, you'll learn to dynamically allocate memory in your C program using standard library functions: malloc(), calloc(), free() and realloc()</p><br><section class="main-content">


<div class="inside-content">
<div class="region region-content-inside">
<div class="block block-block" id="block-block-43">
<div class="content">
<style>
.Learn C language_Responsive_Top { margin: 20px auto; width: 300px; height: 250px; }
@media(min-width: 748px) { .Learn C language_Responsive_Top { width: 728px; height: 90px; } }
@media(min-width: 900px) { .Learn C language_Responsive_Top { width: 300px; height: 250px; margin: 20px 0; } }
@media(min-width: 1150px) { .Learn C language_Responsive_Top { width: 728px; height: 90px; margin: 12px 0; } }
</style>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" style="display: none !important;"></script>
<!-- Learn C language_Responsive_Top -->
<ins class="adsbygoogle Learn C language_Responsive_Top" data-ad-client="ca-pub-9007421361448641" data-ad-slot="1467818021" style="display: none !important;">
</ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script> </div>
</div>
</div>
</div>
<img alt="C Dynamic Memory Allocation" src="./images/c-dynamic-memory-allocation.jpg" title="C Dynamic Memory Allocation"/>
<div class="clearfix">
<div class="region region-content">
<div class="block block-system" id="block-system-main">
<div class="content">
<div about="/c-programming/c-dynamic-memory-allocation" class="node node-c-tutorial clearfix" id="node-155" typeof="sioc:Item foaf:Document">
<span class="rdf-meta element-hidden" content="C Dynamic Memory Allocation" property="dc:title"></span><div class="content clearfix">
<div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>As you know, you have to declare the size of an array before you use it. Hence, the array you declared may be insufficient or more than required to hold data. To solve this issue, you can allocate memory dynamically.</p>
<p>Dynamic memory management refers to manual memory management. This allows you to obtain more memory when required and release it when not necessary.</p>
<p>Although C inherently does not have any technique to allocate memory dynamically, there are 4 library functions defined under <code>&lt;stdlib.h&gt;</code> for dynamic memory allocation.</p>
<table border="1" cellpadding="1" cellspacing="1" summary=" List of library functions for dynamic memory allocation in C programming">
<thead>
<tr>
<th scope="col">Function</th>
<th scope="col">Use of Function</th>
</tr>
</thead>
<tbody>
<tr>
<td>malloc()</td>
<td>Allocates requested size of bytes and returns a pointer first byte of allocated space</td>
</tr>
<tr>
<td>calloc()</td>
<td>Allocates space for an array elements, initializes to zero and then returns a pointer to memory</td>
</tr>
<tr>
<td>free()</td>
<td>deallocate the previously allocated space</td>
</tr>
<tr>
<td>realloc()</td>
<td>Change the size of previously allocated space</td>
</tr>
</tbody>
</table>
<h2>C malloc()</h2>
<p>The name malloc stands for "memory allocation".</p>
<p>The function <code>malloc()</code> reserves a block of memory of specified size and return a pointer of type <code>void</code> which can be casted into pointer of any form.</p>
<h3>Syntax of malloc()</h3>
<pre>ptr = (cast-type*) malloc(byte-size)</pre>
<p>Here, <var>ptr</var> is pointer of cast-type. The <code>malloc()</code> function returns a pointer to an area of memory with size of byte size. If the space is insufficient, allocation fails and returns NULL pointer.</p>
<pre>ptr = (int*) malloc(100 * sizeof(int));</pre>
<p></p><div class="block-inject block-inject-1" id="block-inject-1"><div class="block block-block" id="block-block-123">
<div class="content">
<!-- /8095840/.2_A.34657.4_Learn C language.com_tier1 -->
<div id="div-gpt-ad-1527670353707-0">
<script>
if (window.innerWidth <= 768) {
          googletag.cmd.push(function() { googletag.display('div-gpt-ad-1527670353707-0'); });
      }
</script>
</div>
<!-- /8095840/.2_A.34660.4_Learn C language.com_tier1 -->
<div id="div-gpt-ad-1527670429257-0">
<script>
if (window.innerWidth > 768) {
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1527670429257-0'); });
}
</script>
</div> </div>
</div>
</div><div class="clearfix"></div><p>This statement will allocate either 200 or 400 according to size of <code>int</code> 2 or 4 bytes respectively and the pointer points to the address of first byte of memory.</p>
<h2>C calloc()</h2>
<p>The name calloc stands for "contiguous allocation".</p>
<p>The only difference between malloc() and calloc() is that, malloc() allocates single block of memory whereas calloc() allocates multiple blocks of memory each of same size and sets all bytes to zero.</p>
<h3>Syntax of calloc()</h3>
<pre>ptr = (cast-type*)calloc(n, element-size);</pre>
<p>This statement will allocate contiguous space in memory for an array of <var>n</var> elements. For example:</p>
<pre>ptr = (float*) calloc(25, sizeof(float));</pre>
<p>This statement allocates contiguous space in memory for an array of 25 elements each of size of float, i.e, 4 bytes.</p>
<h2>C free()</h2>
<p>Dynamically allocated memory created with either calloc() or malloc() doesn't get freed on its own. You must explicitly use free() to release the space.</p>
<h3>syntax of free()</h3>
<pre>free(ptr);</pre>
<p>This statement frees the space allocated in the memory pointed by <code>ptr</code>.</p>
<h3>Example #1: Using C malloc() and free()</h3>
<p><strong>Write a C program to find sum of n elements entered by user. To perform this program, allocate memory dynamically using malloc() function.</strong></p>
<pre class="prettyprint prettyprinted" style=""><code><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdio.h&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdlib.h&gt;</span><span class="pln">

</span><span class="kwd">int</span><span class="pln"> main</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> num</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*</span><span class="pln">ptr</span><span class="pun">,</span><span class="pln"> sum </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

    printf</span><span class="pun">(</span><span class="str">"Enter number of elements: "</span><span class="pun">);</span><span class="pln">
    scanf</span><span class="pun">(</span><span class="str">"%d"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">num</span><span class="pun">);</span><span class="pln">

    ptr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">*)</span><span class="pln"> malloc</span><span class="pun">(</span><span class="pln">num </span><span class="pun">*</span><span class="pln"> </span><span class="kwd">sizeof</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">));</span><span class="pln">  </span><span class="com">//memory allocated using malloc</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">ptr </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        printf</span><span class="pun">(</span><span class="str">"Error! memory not allocated."</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">exit</span><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    printf</span><span class="pun">(</span><span class="str">"Enter elements of array: "</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">for</span><span class="pun">(</span><span class="pln">i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> num</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        scanf</span><span class="pun">(</span><span class="str">"%d"</span><span class="pun">,</span><span class="pln"> ptr </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">);</span><span class="pln">
        sum </span><span class="pun">+=</span><span class="pln"> </span><span class="pun">*(</span><span class="pln">ptr </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    printf</span><span class="pun">(</span><span class="str">"Sum = %d"</span><span class="pun">,</span><span class="pln"> sum</span><span class="pun">);</span><span class="pln">
    free</span><span class="pun">(</span><span class="pln">ptr</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code>
</pre>
<h3>Example #2: Using C calloc() and free()</h3>
<p><strong>Write a C program to find sum of n elements entered by user. To perform this program, allocate memory dynamically using calloc() function.</strong></p>
<pre class="prettyprint prettyprinted" style=""><code><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdio.h&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdlib.h&gt;</span><span class="pln">

</span><span class="kwd">int</span><span class="pln"> main</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> num</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*</span><span class="pln">ptr</span><span class="pun">,</span><span class="pln"> sum </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    printf</span><span class="pun">(</span><span class="str">"Enter number of elements: "</span><span class="pun">);</span><span class="pln">
    scanf</span><span class="pun">(</span><span class="str">"%d"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">num</span><span class="pun">);</span><span class="pln">

    ptr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">*)</span><span class="pln"> calloc</span><span class="pun">(</span><span class="pln">num</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">sizeof</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">));</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">ptr </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        printf</span><span class="pun">(</span><span class="str">"Error! memory not allocated."</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">exit</span><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    printf</span><span class="pun">(</span><span class="str">"Enter elements of array: "</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">for</span><span class="pun">(</span><span class="pln">i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> num</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        scanf</span><span class="pun">(</span><span class="str">"%d"</span><span class="pun">,</span><span class="pln"> ptr </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">);</span><span class="pln">
        sum </span><span class="pun">+=</span><span class="pln"> </span><span class="pun">*(</span><span class="pln">ptr </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    printf</span><span class="pun">(</span><span class="str">"Sum = %d"</span><span class="pun">,</span><span class="pln"> sum</span><span class="pun">);</span><span class="pln">
    free</span><span class="pun">(</span><span class="pln">ptr</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>
<h2>C realloc()</h2>
<p>If the previously allocated memory is insufficient or more than required, you can change the previously allocated memory size using realloc().</p>
<h3>Syntax of realloc()</h3>
<pre>ptr = realloc(ptr, newsize);</pre>
<p>Here, <var>ptr</var> is reallocated with size of newsize.</p>
<h3>Example #3: Using realloc()</h3>
<pre class="prettyprint prettyprinted" style=""><code><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdio.h&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdlib.h&gt;</span><span class="pln">

</span><span class="kwd">int</span><span class="pln"> main</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> </span><span class="pun">*</span><span class="pln">ptr</span><span class="pun">,</span><span class="pln"> i </span><span class="pun">,</span><span class="pln"> n1</span><span class="pun">,</span><span class="pln"> n2</span><span class="pun">;</span><span class="pln">
    printf</span><span class="pun">(</span><span class="str">"Enter size of array: "</span><span class="pun">);</span><span class="pln">
    scanf</span><span class="pun">(</span><span class="str">"%d"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">n1</span><span class="pun">);</span><span class="pln">

    ptr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">*)</span><span class="pln"> malloc</span><span class="pun">(</span><span class="pln">n1 </span><span class="pun">*</span><span class="pln"> </span><span class="kwd">sizeof</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">));</span><span class="pln">

    printf</span><span class="pun">(</span><span class="str">"Address of previously allocated memory: "</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">for</span><span class="pun">(</span><span class="pln">i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> n1</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
         printf</span><span class="pun">(</span><span class="str">"%u\t"</span><span class="pun">,</span><span class="pln">ptr </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">);</span><span class="pln">

    printf</span><span class="pun">(</span><span class="str">"\nEnter new size of array: "</span><span class="pun">);</span><span class="pln">
    scanf</span><span class="pun">(</span><span class="str">"%d"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">n2</span><span class="pun">);</span><span class="pln">
    ptr </span><span class="pun">=</span><span class="pln"> realloc</span><span class="pun">(</span><span class="pln">ptr</span><span class="pun">,</span><span class="pln"> n2</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">for</span><span class="pun">(</span><span class="pln">i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> n2</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
         printf</span><span class="pun">(</span><span class="str">"%u\t"</span><span class="pun">,</span><span class="pln"> ptr </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div></div></div></div>
</div> </div>
</div>
</div>

</div>
</section>
  </div>
</body>
</html>
